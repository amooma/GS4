<style type="text/css">
	form.button_to { display: inline; }
	form.button_to * { display: inline; }
	.move_button {
		margin: 0 1px;
		vertical-align: middle;
		text-align: center;
		letter-spacing: -1px;
	}
</style>

<h1><%= t('dp_route.view.index') %></h1>

<div class="noticebox">#TODO Die WÃ¤hl-Routen werden noch nicht ausgewertet!</div>

<table>
	<tr>
		<% i18n_path = 'activerecord.attributes.dialplan_route.' %>
		<th><%= t( i18n_path + 'eac' ) %></th>
		<th><%= t( i18n_path + 'pattern' ) %></th>
		<th><%= t( i18n_path + 'user' ) %></th>
		<th><%= t( i18n_path + 'sip_gateway' ) %></th>
		<th><%= t( i18n_path + 'name' ) %></th>
		<th style="min-width:100pt;"></th>
		<th></th>
		<th></th>
		<th></th>
	</tr>

<% @dialplan_routes.each do |dp_route| %>
	<tr style="<%=
		params[:moved_id] && dp_route.id == params[:moved_id].to_i \
		? 'outline: 2px solid #aac; outline-offset: 2px; -moz-outline-radius: 5px;' : ''
	%>">
		<td><big><tt><%= dp_route.eac %></tt></big></td>
		<td><big><tt><%= dp_route.dialplan_pattern.try(:pattern) %></tt></big></td>
		<td><%= dp_route.user ? dp_route.user.try(:to_display) : t('dp_route.all_users') %></td>
		<td class="<%= dp_route.sip_gateway ? 'status_yes' : 'status_no' %>"><%= dp_route.sip_gateway ? dp_route.sip_gateway.try(:hostport) : t('dp_route.no_gateway') %></td>
		<td><%= dp_route.name %></td>
		<td style="text-align:center;"><%=
			button_to "\u{2191}\u{2191}",
			move_to_top_dialplan_route_path( dp_route ),
			{ :class => 'move_button', :disabled => dp_route.first? }
		%><%=
			button_to "\u{2191}",
			move_up_dialplan_route_path( dp_route ),
			{ :class => 'move_button', :disabled => dp_route.first? }
		%><%=
			button_to "\u{2193}",
			move_down_dialplan_route_path( dp_route ),
			{ :class => 'move_button', :disabled => dp_route.last? }
		%><%=
			button_to "\u{2193}\u{2193}",
			move_to_bottom_dialplan_route_path( dp_route ),
			{ :class => 'move_button', :disabled => dp_route.last? }
		%></td>
		<td><%= link_to t(:show), dp_route %></td>
		<td><%= link_to t(:edit), edit_dialplan_route_path( dp_route ) %></td>
		<td><%= button_to t(:destroy), dp_route, :confirm => t(:are_you_sure), :method => :delete %></td>
	</tr>
<% end %>
</table>

<br />

<%= link_to t('dp_route.view.new'), new_dialplan_route_path %>
